# all-contributors

è‡ªåŠ¨æ”¶é›†å¹¶èšåˆ GitHub ç»„ç»‡ã€ç”¨æˆ·æˆ–æŒ‡å®šä»“åº“çš„æ‰€æœ‰è´¡çŒ®è€…æ•°æ®ï¼Œç”Ÿæˆ JSONã€PNG å’Œäº¤äº’å¼ HTML ä¸‰ç§æ ¼å¼è¾“å‡ºã€‚æ”¯æŒä½œä¸º GitHub Action è‡ªåŠ¨åŒ–è¿è¡Œï¼Œä¹Ÿå¯æœ¬åœ°å‘½ä»¤è¡Œä½¿ç”¨ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸš€ é›¶é…ç½®å¯åŠ¨
æ— éœ€ä»»ä½•å‚æ•°å³å¯ç»Ÿè®¡å½“å‰ä»“åº“æ‰€å±ç»„ç»‡/ç”¨æˆ·çš„æ‰€æœ‰å…¬å¼€ä»“åº“è´¡çŒ®è€…ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯è¿½è¸ªçš„å†å²è®°å½•ã€‚

### ğŸ¯ çµæ´»ç›®æ ‡é…ç½®
- **é€šé…ç¬¦åŒ¹é…**ï¼š`owner/*` ç»Ÿè®¡è¯¥ owner ä¸‹æ‰€æœ‰ä»“åº“
- **ç²¾ç¡®æŒ‡å®š**ï¼š`owner/repo` ç»Ÿè®¡ç‰¹å®šä»“åº“
- **æ··åˆæ‰¹é‡**ï¼šä¸€æ¬¡æ€§æŒ‡å®šå¤šä¸ªç»„ç»‡ã€ç”¨æˆ·æˆ–ä»“åº“
- **æ™ºèƒ½é»˜è®¤**ï¼šé»˜è®¤ç»Ÿè®¡å½“å‰ä»“åº“æ‰€åœ¨ç”¨æˆ·æˆ–ç»„ç»‡ä¸‹çš„æ‰€æœ‰å…¬å¼€ä»“åº“è´¡çŒ®è€…

### ğŸ“Š å¤šæ ¼å¼è¾“å‡º
1. **JSON æ•°æ®**ï¼ˆ`contributors.json`ï¼‰
   - å…¨å±€å»é‡æ±‡æ€»ï¼ŒæŒ‰è´¡çŒ®æ¬¡æ•°é™åº
   - æŒ‰ä»“åº“ç»´åº¦è¯¦ç»†åˆ†ç»„
   - å®Œæ•´çš„è´¡çŒ®è€…ä¿¡æ¯ï¼ˆå§“åã€é‚®ç®±ã€~~å¤´åƒã€ä¸»é¡µ~~ï¼‰

2. **PNG å›¾ç‰‡å¢™**ï¼ˆ`contributors.png`ï¼‰
   - åœ†å½¢å¤´åƒå¸ƒå±€ï¼Œé€æ˜èƒŒæ™¯
   - è‡ªåŠ¨ä¼˜åŒ–ä¸º 2:1 çŸ©å½¢æ¯”ä¾‹ï¼ˆå®½åº¦çº¦ä¸ºé«˜åº¦ä¸¤å€ï¼‰
   - æ ¹æ®è´¡çŒ®è€…æ•°é‡æ™ºèƒ½æ’åˆ—

3. **äº¤äº’å¼ HTML**ï¼ˆ`contributors.html`ï¼‰
   - ç°ä»£æ¸å˜è®¾è®¡ï¼Œå“åº”å¼å¸ƒå±€
   - å¤´åƒå¯ç‚¹å‡»è·³è½¬åˆ°è´¡çŒ®è€… GitHub ä¸»é¡µ
   - å†…åµŒ PNG å›¾ç‰‡é¢„è§ˆ
   - ä¸€é”®å¤åˆ¶å›¾ç‰‡é“¾æ¥æŒ‰é’®ï¼ˆé€‚åˆåˆ†äº«åˆ°å…¶ä»–å¹³å°å’ŒåµŒå…¥åˆ°ç½‘ç«™æˆ–READMEä¸­ï¼‰

### ğŸ”§ æ™ºèƒ½å¤„ç†
- è·¨ä»“åº“å»é‡æ±‡æ€»è´¡çŒ®æ¬¡æ•°
- è‡ªåŠ¨è·³è¿‡ fork å’Œå½’æ¡£ä»“åº“
- é€Ÿç‡é™åˆ¶æ™ºèƒ½å»¶è¿Ÿ

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨é»˜è®¤é…ç½®

- 1.[åˆ›å»ºall-contributors](https://github.com/new?template_name=all-contributors&template_owner=Sunrisepeak)
- 2.å¼€å¯æ–°å»ºä»“åº“çš„`Github Pages`åŠŸèƒ½ (å¯é€‰)
  - `Setting -> Pages -> Build and deployment -> Source -> Github Actions`

### GitHub Action æ–¹å¼

#### æœ€ç®€é…ç½®ï¼ˆè‡ªåŠ¨æ£€æµ‹å½“å‰ç»„ç»‡ï¼‰
```yaml
name: Update Contributors
on:
  schedule:
    - cron: '0 3 * * *'  # æ¯å¤©å‡Œæ™¨ 3 ç‚¹è¿è¡Œ
  workflow_dispatch:

jobs:
  collect:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v4
      
      - name: Collect contributors
        uses: Sunrisepeak/all-contributors@main
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Commit results
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add contributors.*
          git diff --quiet && git diff --staged --quiet || (git commit -m "Update contributors" && git push)
```

#### æŒ‡å®šå¤šä¸ªç›®æ ‡
```yaml
      - uses: Sunrisepeak/all-contributors@main
        with:
          token: ${{ secrets.MY_PAT }}
          targets: |
            my-org/*
            alice/*
            team/tool
            bob/project
```

**è¯´æ˜**ï¼š
- æ”¯æŒç©ºæ ¼ã€é€—å·æˆ–æ¢è¡Œä½œä¸ºåˆ†éš”ç¬¦
- `owner/*` ç»Ÿè®¡è¯¥ owner çš„æ‰€æœ‰å…¬å¼€ä»“åº“
- `owner/repo` ç»Ÿè®¡ç‰¹å®šä»“åº“
- ç•™ç©º `targets` åˆ™è‡ªåŠ¨æ£€æµ‹ `GITHUB_REPOSITORY` çš„ owner

### æœ¬åœ°å‘½ä»¤è¡Œæ–¹å¼

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Sunrisepeak/all-contributors.git
cd all-contributors

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# ç»Ÿè®¡æŒ‡å®šç›®æ ‡
export GITHUB_TOKEN=ghp_your_token_here
python main.py 'octocat/*'

# æˆ–ç›´æ¥ä¼ é€’å‚æ•°
python main.py --token ghp_xxx 'myorg/*' alice/repo bob/project
```

**ç”Ÿæˆæ–‡ä»¶**ï¼š
- `contributors.json` - ç»“æ„åŒ–æ•°æ®
- `contributors.png` - è´¡çŒ®è€…å¤´åƒå¢™
- `contributors.html` - äº¤äº’å¼ç½‘é¡µ

---

## âš™ï¸ å‚æ•°é…ç½®

### Inputsï¼ˆGitHub Actionï¼‰

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `token` | `GITHUB_TOKEN` | GitHub è®¿é—®ä»¤ç‰Œã€‚å»ºè®®ä½¿ç”¨ PATï¼›å…¬å¼€ä»“åº“å¯ç”¨ `GITHUB_TOKEN` |
| `targets` | è‡ªåŠ¨æ£€æµ‹ | ç›®æ ‡åˆ—è¡¨ï¼Œæ ¼å¼ï¼š`owner/*` æˆ– `owner/repo`ï¼Œå¤šä¸ªç”¨ç©ºæ ¼/é€—å·/æ¢è¡Œåˆ†éš” |
| `out_file` | `contributors.json` | è¾“å‡º JSON æ–‡ä»¶è·¯å¾„ |
| `include_anonymous` | `true` | æ˜¯å¦åŒ…å«åŒ¿åè´¡çŒ®è€… |
| `skip_archived` | `true` | æ˜¯å¦è·³è¿‡å·²å½’æ¡£ä»“åº“ |
| `per_repo_delay_ms` | `150` | æ¯ä¸ªä»“åº“è¯·æ±‚é—´éš”ï¼ˆæ¯«ç§’ï¼‰ï¼Œé¿å…é€Ÿç‡é™åˆ¶ |

### ç¯å¢ƒå˜é‡ï¼ˆæœ¬åœ°è¿è¡Œï¼‰

| å˜é‡ | è¯´æ˜ |
|------|------|
| `GITHUB_TOKEN` æˆ– `GH_TOKEN` | GitHub è®¿é—®ä»¤ç‰Œ |
| `TARGETS` | ç›®æ ‡åˆ—è¡¨ï¼ˆé€—å·æˆ–ç©ºæ ¼åˆ†éš”ï¼‰ |
| `OUT_FILE` | è¾“å‡ºæ–‡ä»¶è·¯å¾„ |
| `INCLUDE_ANONYMOUS` | åŒ…å«åŒ¿åè´¡çŒ®è€…ï¼ˆ`true`/`false`ï¼‰ |
| `SKIP_ARCHIVED` | è·³è¿‡å½’æ¡£ä»“åº“ï¼ˆ`true`/`false`ï¼‰ |
| `PER_REPO_DELAY_MS` | ä»“åº“é—´å»¶è¿Ÿæ¯«ç§’æ•° |

---

## ğŸ“„ è¾“å‡ºæ ¼å¼

### contributors.json ç»“æ„

```json
{
  "all-contributors": "1.0.0",
  "count": 5,
  "contributors": [
    {
      "name": "Alice",
      "email": "alice@example.com",
    },
    {
      "name": "Bob",
      "email": null,
    }
  ],
  "details": {
    "owner/repo1": {
      "count": 3,
      "contributors": [...]
    },
    "owner/repo2": {
      "count": 2,
      "contributors": [...]
    }
  }
}
```

**å­—æ®µè¯´æ˜**ï¼š
- `all-contributors`ï¼šå·¥å…·ç‰ˆæœ¬æ ‡è¯†
- `count`ï¼šå…¨å±€å»é‡åçš„è´¡çŒ®è€…æ€»æ•°
- `contributors`ï¼šèšåˆçš„è´¡çŒ®è€…åˆ—è¡¨ï¼ˆæŒ‰ `contributions` é™åºï¼‰
  - `name`ï¼šè´¡çŒ®è€…å§“å
  - `email`ï¼šé‚®ç®±ï¼ˆå¯èƒ½ä¸º nullï¼‰
  - ~~`avatar_url`ï¼šGitHub å¤´åƒ URL~~
  - ~~`html_url`ï¼šGitHub ä¸ªäººä¸»é¡µ~~
  - ~~`contributions`ï¼šè·¨ä»“åº“ç´¯è®¡æäº¤æ¬¡æ•°~~
- `details`ï¼šæŒ‰ä»“åº“åˆ†ç»„çš„è¯¦ç»†è´¡çŒ®è€…ä¿¡æ¯

### contributors.png

- **å¸ƒå±€**ï¼šåœ†å½¢å¤´åƒï¼Œé€æ˜èƒŒæ™¯ï¼Œè‡ªåŠ¨è®¡ç®—æœ€æ¥è¿‘ 2:1 æ¯”ä¾‹çš„ç½‘æ ¼å¸ƒå±€
- **å°ºå¯¸**ï¼šå¤´åƒ 80Ã—80 pxï¼Œé—´è· 10 pxï¼Œè¾¹è· 16 px
- **ç”¨é€”**ï¼šé€‚åˆåµŒå…¥ README æˆ–åˆ†äº«åˆ°ç¤¾äº¤å¹³å°

### contributors.html

- **è®¾è®¡**ï¼šç°ä»£æ¸å˜èƒŒæ™¯ï¼Œç»ç’ƒæ€æ•ˆæœï¼Œå“åº”å¼ç½‘æ ¼
- **åŠŸèƒ½**ï¼š
  - å¤´åƒå¯ç‚¹å‡»è·³è½¬åˆ°è´¡çŒ®è€…ä¸»é¡µ
  - å†…åµŒ PNG å›¾ç‰‡é¢„è§ˆ
  - "å¤åˆ¶è´¡çŒ®è€…å›¾ç‰‡é“¾æ¥" æŒ‰é’®ï¼ˆä½¿ç”¨ Clipboard APIï¼‰
- **éƒ¨ç½²**ï¼šå¯ç›´æ¥ä½œä¸º GitHub Pages å‘å¸ƒï¼ˆå‚è€ƒ `.github/workflows/deploy-pages.yml`ï¼‰

---

## ğŸ” æƒé™ä¸é€Ÿç‡é™åˆ¶

### Token æƒé™
- **å…¬å¼€ä»“åº“**ï¼š`GITHUB_TOKEN`ï¼ˆActions è‡ªåŠ¨æä¾›ï¼‰é€šå¸¸è¶³å¤Ÿ
- **ç§æœ‰ä»“åº“**ï¼šéœ€è¦æœ‰ `repo` æƒé™çš„ Personal Access Token (PAT)
- **å¤§å‹ç»„ç»‡**ï¼šå»ºè®®ä½¿ç”¨ PAT ä»¥è·å¾—æ›´é«˜é€Ÿç‡é™åˆ¶

### é€Ÿç‡é™åˆ¶åº”å¯¹
- **é»˜è®¤å»¶è¿Ÿ**ï¼šæ¯ä¸ªä»“åº“é—´éš” 150 æ¯«ç§’
- **å¤§å‹ç»„ç»‡**ï¼šè°ƒå¤§ `per_repo_delay_ms`ï¼ˆå¦‚ `300` æˆ– `500`ï¼‰
- **é€Ÿç‡è€—å°½**ï¼šæ—¥å¿—ä¼šæ˜¾ç¤ºå‰©ä½™é¢åº¦ä¸é‡ç½®æ—¶é—´ï¼Œè„šæœ¬è‡ªåŠ¨å¤„ç† 403 å“åº”

---

## ğŸ“¦ ä¾èµ–

- **Python 3.7+**
- **Pillow**ï¼šPNG å›¾ç‰‡ç”Ÿæˆï¼ˆGitHub Action è‡ªåŠ¨å®‰è£…ï¼Œæœ¬åœ°éœ€æ‰‹åŠ¨ `pip install -r requirements.txt`ï¼‰

---

## ğŸŒŸ ç¤ºä¾‹é¡¹ç›®

æœ¬ä»“åº“è‡ªèº«ä½¿ç”¨è¯¥ Action ç»Ÿè®¡ä»¥ä¸‹ç›®æ ‡ï¼š
- `Sunrisepeak/*`
- `mcpp-community/*`
- `d2learn/*`

æŸ¥çœ‹æœ€æ–°ç»“æœï¼š
- [contributors.json](../contributors.json)
- [contributors.png](../contributors.png)
- [contributors.html](../contributors.html)ï¼ˆå¯é€šè¿‡ GitHub Pages è®¿é—®ï¼‰

---

## ğŸ› ï¸ é«˜çº§ç”¨æ³•

### è‡ªåŠ¨éƒ¨ç½²åˆ° GitHub Pages

åœ¨ `.github/workflows/deploy-pages.yml` ä¸­é…ç½®ï¼š

```yaml
name: Deploy Contributors to GitHub Pages

on:
  push:
    branches: [main]
    paths:
      - 'contributors.html'
      - 'contributors.png'
      - 'contributors.json'
      - '.github/workflows/deploy-pages.yml'
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Setup Pages
        uses: actions/configure-pages@v4
      
      - name: Prepare deployment
        run: |
          mkdir -p _site
          cp contributors.html _site/index.html
          cp contributors.png _site/
          cp contributors.json _site/
      
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
      
      - name: Deploy to Pages
        uses: actions/deploy-pages@v4
```

### æœ¬åœ°è°ƒè¯•

```bash
# æ£€æŸ¥ Python ç¯å¢ƒ
python --version

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# æµ‹è¯•å•ä¸ªä»“åº“
python main.py --token ghp_xxx octocat/Hello-World

# æµ‹è¯•é€šé…ç¬¦
python main.py --token ghp_xxx 'my-org/*'

# æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶
ls -lh contributors.*
```

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

**è´¡çŒ®è€…åˆ—è¡¨ç”±æœ¬å·¥å…·è‡ªåŠ¨ç»´æŠ¤** ğŸ‰

---

## ğŸ“œ è®¸å¯è¯

Apache-2.0 License - è¯¦è§ [LICENSE](../LICENSE)

---

## ğŸ’¬ åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è®¿é—® [GitHub Issues](https://github.com/Sunrisepeak/all-contributors/issues)